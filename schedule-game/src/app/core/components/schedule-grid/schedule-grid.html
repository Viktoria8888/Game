
<div class="header">
  <h3>Weekly Schedule</h3>
  <div class="view-toggle">
    <button [class.active]="viewMode() === 'grid'" (click)="viewMode.set('grid')">Grid</button>
    <button [class.active]="viewMode() === 'compact'" (click)="viewMode.set('compact')">
      Compact
    </button>
  </div>
</div>

@if (viewMode() === 'grid') {
<div class="grid-view">
  <table class="schedule-table">
    <thead>
      <tr>
        <th class="time-column">Time</th>
        @for (day of days; track day) {
        <th class="day-column">{{ day }}</th>
        }
      </tr>
    </thead>
    <tbody>
      @for (hour of hours; track hour) {
      <tr class="time-row">
        <td class="time-cell">{{ formatHour(hour) }}</td>

        @for (day of days; track day) {
        <td
          class="slot-cell"
          [class.occupied]="hasSlot(day, hour)"
          [class.conflict]="hasConflict(day, hour)"
          [class.first-slot]="isFirstSlot(day, hour)"
        >
          @if (isFirstSlot(day, hour)) {
          <div class="slot-content">
            <div class="course-name">{{ getCourseName(day, hour) }}</div>
            <div class="course-info">{{ getCourseInfo(day, hour) }}</div>
          </div>
          }
        </td>
        }
      </tr>
      }
    </tbody>
  </table>
</div>
} @if (viewMode() === 'compact') {
<div class="compact-view">
  @for (day of days; track day) {
  <div class="day-section">
    <div class="day-header">{{ day }}</div>
    <div class="day-slots">
      @for (slot of getDaySlots(day); track slot) {
      <div class="compact-slot" [class.conflict]="conflictingCourseIds().has(slot.course!.id)">
        <div class="slot-time">
          {{ formatHour(slot.startTime) }} - {{ formatHour(slot.startTime + 1) }}
        </div>
        <div class="slot-course">
          {{ slot.course!.name }}
        </div>
      </div>
      } @empty {
      <div class="empty-day">No classes</div>
      }
    </div>
  </div>
  }
</div>
}

<div class="legend">
  <div class="legend-item">
    <span class="legend-dot occupied"></span>
    <span>Occupied</span>
  </div>
  <div class="legend-item">
    <span class="legend-dot conflict"></span>
    <span>Conflict</span>
  </div>
</div>
