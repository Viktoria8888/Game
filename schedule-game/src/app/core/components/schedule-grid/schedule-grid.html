<div class="header">
  <h3>Weekly Schedule</h3>
  <div class="view-toggle">
    <button [class.active]="viewMode() === 'grid'" (click)="viewMode.set('grid')">Grid</button>
    <button [class.active]="viewMode() === 'compact'" (click)="viewMode.set('compact')">
      Compact
    </button>
  </div>
</div>

@if (viewMode() === 'grid') {
<div class="grid-view">
  <table class="schedule-table">
    <thead>
      <tr>
        <th class="time-column">Time</th>
        @for (day of days; track day) {
        <th class="day-column">{{ day }}</th>
        }
      </tr>
    </thead>
    <tbody>
      @for (hour of hours; track hour) {
      <tr class="time-row">
        <td class="time-cell">{{ formatHour(hour) }}</td>

        @for (day of days; track day) {
        <td
          class="slot-cell"
          [class.occupied]="hasSlot(day, hour)"
          [class.first-slot]="isFirstSlot(day, hour)"
          [class.shake]="isShaking(day, hour)"
          (dblclick)="onSlotDoubleClick(day, hour)"
        >
          @if (isFirstSlot(day, hour)) {
          <div class="slot-content">
            <div class="course-name">{{ getCourseName(day, hour) }}</div>
            <div class="course-info">{{ getCourseInfo(day, hour) }}</div>
          </div>
          }
        </td>
        }
      </tr>
      }
    </tbody>
  </table>
</div>
}
